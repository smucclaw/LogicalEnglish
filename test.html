<div id="solution"></div>

<script src="https://SWI-Prolog.github.io/npm-swipl-wasm/3/5/5/index.js"></script>

<script>
  (async () => {
    const swipl = await SWIPL({ arguments: ["-q"] });

    await swipl.prolog.load_string(`
      :- ['https://github.com/smucclaw/LogicalEnglish/raw/qlf-wasm/le_answer.qlf'].
    `);

    const le_prog = `
the target language is: prolog.

the templates are:
 *a person* is the parent of *a person*. 
 *a person* is the grandparent of *a person*.

the knowledge base rules includes:
  a person is the grandparent of an other person
  if the person is the parent of a third person
  and the third person is the parent of the other person.

scenario s is:
  alice is the parent of bob.
  bob is the parent of charlie.

query q is:
  which person is the grandparent of which other person.
    `;

    const le_query = "q";

    // const query = "member(X, [a, b, c]).";
    const query = `
      le_answer:parse_and_query_and_explanation("test", en("${le_prog}"), ${le_query}, with(s), JustificationHtml).
    `;

    const results = swipl.prolog.query(query);
    const soln0 = await results.next().value.JustificationHtml;

    console.log("First solution:\n", soln0);

    const solutionElement = document.getElementById("solution");
    solutionElement.innerHTML = soln0;
  })();
</script>